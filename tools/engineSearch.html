---
layout: toolTemplate
title: Engine Search
---
th{
	text-align:left;
	font-size:110%;
}
td,th{
	padding:3px;
	border-left-style:solid;
	border-top-style:solid;
	border-width:1px;
	border-color:#000000;
}
tr{
	background-color:#DDDDDD;
}
tr:nth-child(2n+1){
	background-color:initial;
}
table{
	box-shadow:4px 4px 3px #888888;
}
	</style>
	<script src="engines.js"></script>
	<script>
engines = engines.engines;//this may look silly, but there are also stage data in the file, not used at the moment.
var change = function(target,value){
	document.getElementById(target).value = value;
};
var foundIndex = [];
var update = function(){
	foundIndex = [];
	var maxMass = Number(document.getElementById("mass").value);
	var minThrust = Number(document.getElementById("thrust").value)*1000;//kilo newtons
	var minVelocity = Number(document.getElementById("velocity").value);
	var out = "<tr><th>Name</th><th>Mass (kg)</th><th>Isp (s)</th><th>Thrust (kN)</th><th>Isp SL (s)</th><th>Thrust SL (kN)</th><th>Fuel</th><th>Oxidizer</th><th>Length (m)</th><th>Country</th></tr>";
	for(var i=0;i<engines.length;i++){
		if(
			engines[i].mass < maxMass
			&& engines[i].thrustVacuum > minThrust
			&& engines[i].isp > minVelocity
		){
			foundIndex.push(i);
			out += "<tr><td><a href='"+engines[i].source+"'>"+engines[i].name+"</a></td><td>"+engines[i].mass+"</td><td>"+engines[i].isp+"</td><td>"+engines[i].thrustVacuum/1000+"</td><td>";
			if(engines[i].ispGround){out += engines[i].ispGround};
			out += "</td><td>";
			if(engines[i].thrustGround){out += engines[i].thrustGround/1000};
			out += "</td><td>";
			if(engines[i].fuel){out += engines[i].fuel};
			out += "</td><td>";
			if(engines[i].oxidizer){out += engines[i].oxidizer};
			out += "</td><td>";
			if(engines[i].height){out += engines[i].height};
			out += "</td><td>";
			if(engines[i].country){out += engines[i].country};
			out += "</td></tr>";
		};
	};
	var warnings = "";
	if(!foundIndex.length){
		warnings = "No engines found matching the parameters";
	};
	document.getElementById("warnings").innerHTML = warnings;
	document.getElementById("list").innerHTML = out;
};
var draw = function(){
	var plotInfo = document.getElementById("plotInfo").elements;
	var plotSize = Number(plotInfo.plotSize.value);
	var plotType = Number(plotInfo.plotType.value);
	var plot = document.getElementById("plot");
	plot.width = plot.height = plotSize;
	var xaxis = [];
	var yaxis = [];
	var smallestX;
	var smallestY;
	var largestX;
	var largestY;
	if(plotType === 0){
		smallestX = largestX = engines[foundIndex[0]].mass;
		smallestY = largestY = engines[foundIndex[0]].thrustVacuum;
		for(var i=0;i<foundIndex.length;i++){
			xaxis.push(engines[foundIndex[i]].mass);
			yaxis.push(engines[foundIndex[i]].thrustVacuum);
		};
	}
	else if(plotType === 1){
		smallestX = largestX = engines[foundIndex[0]].mass;
		smallestY = largestY = engines[foundIndex[0]].isp;
		for(var i=0;i<foundIndex.length;i++){
			xaxis.push(engines[foundIndex[i]].mass);
			yaxis.push(engines[foundIndex[i]].isp);
		};
	}
	else{
		smallestX = largestX = engines[foundIndex[0]].isp;
		smallestY = largestY = engines[foundIndex[0]].thrustVacuum;
		for(var i=0;i<foundIndex.length;i++){
			xaxis.push(engines[foundIndex[i]].isp);
			yaxis.push(engines[foundIndex[i]].thrustVacuum);
		};
	};
	for(var i=1;i<xaxis.length;i++){
		if(xaxis[i] < smallestX){
			smallestX = xaxis[i];
		}
		else if(xaxis[i] > largestX){
			largestX = xaxis[i];
		};
		if(yaxis[i] < smallestY){
			smallestY = yaxis[i];
		}
		else if(yaxis[i] > largestY){
			largestY = yaxis[i];
		};
	};
	//so the plot has to be scaled.
};
	</script>
</head>
<body>
<div class="wrapper" id="main">
<h1>Engine Search</h1>
<div class="container">
	<p>Max engine mass:</p>
	<input type="range" id="massSlider"
		min="10" max="20000" step="1" value="1000"
		oninput="change('mass',this.value)">
	<input type="text" id="mass"
		value="1000"
		oninput="change('massSlider',this.value)">kg
	<p>Min engine thrust:</p>
	<input type="range" id="thrustSlider"
		min="0" max="2000" step="1" value="50"
		oninput="change('thrust',this.value)">
	<input type="text" id="thrust"
		value="50"
		oninput="change('thrustSlider',this.value)">kN
	<p>Min specific Impulse:</p>
	<input type="range" id="velocitySlider"
		min="0" max="2000" step="1" value="300"
		oninput="change('velocity',this.value)">
	<input type="text" id="velocity"
		value="300"
		oninput="change('velocitySlider',this.value)">s
	<br>
</div><br>
<button onclick="update()">Update</button>
<hr>
<p id="warnings"></p>
<table>
	<tbody id="list">
		<tr>
			<th>Name</th>
			<th>Mass (kg)</th>
			<th>Isp (s)</th>
			<th>Thrust (kN)</th>
			<th>Isp SL (s)</th>
			<th>Thrust SL (kN)</th>
			<th>Fuel</th>
			<th>Oxidizer</th>
			<th>Length (m)</th>
			<th>Country</th>
		</tr>
	</tbody>
</table>
<hr>
<h2>Draw graph</h2>
<p style="color:red">Under construction</p>
<div class="container">
	Plot:
	<br>
	<form id="plotInfo">
		<input type="radio" name="plotType" value="0" checked>Mass - Thrust<br>
		<input type="radio" name="plotType" value="1">Mass - Isp<br>
		<input type="radio" name="plotType" value="2">Isp Thrust<br>
		<br>
		Size:
		<br>
		<input type="radio" name="plotSize" value="512" checked>512 x 512<br>
		<input type="radio" name="plotSize" value="1024">1024 x 1024<br>
		<input type="radio" name="plotSize" value="2048">2048 x 2048<br>
	</form>
	<br>
	<button onclick="draw()">Draw</button>
</div><br>
<canvas id="plot"></canvas>
</div>
</body>
</html>
