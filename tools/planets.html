---
layout: toolTemplate
title: Engine Search
---
<div class="wrapper" id="main">
	<h1>Transfer calculator</h1>
	<p>Data from planets.json</p>
	<form id="selection" style="font-family:monospace;">
		Origin <select name="origin"></select>
		<select>
			<option value="surface">Surface</option>
			<option value="lowOrbit" selected>Low orbit</option>
			<option value="escape">Escape</option>
		</select><br>
		Target <select name="target"></select>
		<select>
			<option value="surface">Surface</option>
			<option value="lowOrbit" selected>Low orbit</option>
			<option value="escape">Escape</option>
		</select><br>
	</form>
</div>
<script src="../js/planets.js"></script>
<script>
var selectionContext = {
	unselectedQueue:["sun"],
	objectQueue:[],
	prober:function(){
		if(this.unselectedQueue.length){
			var nextUp = this.unselectedQueue.pop();
			this.objectQueue.push(nextUp);
			if(planets[nextUp].hasOwnProperty("orbit")){
				if(planets[nextUp].orbit.hasOwnProperty("children")){
					for(var i=0;i<planets[nextUp].orbit.children.length;i++){
						this.unselectedQueue.push(planets[nextUp].orbit.children[i]);
					};
				};
			};
			this.prober();
		};
		this.objectQueue.sort();
		return;
	},
	renderSelection:function(){
		var originList = document.getElementsByName("origin")[0];
		var targetList = document.getElementsByName("target")[0];
		for(var i=0;i<this.objectQueue.length;i++){
			var value = this.objectQueue[i];
			var html = this.objectQueue[i][0].toUpperCase() + this.objectQueue[i].slice(1);
			var option = document.createElement('option');
			option.value = value;
			option.innerHTML = html;
			originList.appendChild(option);
			var option = document.createElement('option');
			option.value = value;
			option.innerHTML = html;
			targetList.appendChild(option);
		};
		originList.selectedIndex = this.objectQueue.indexOf("earth");
		targetList.selectedIndex = this.objectQueue.indexOf("moon");
	}
};
selectionContext.prober();
selectionContext.renderSelection();
</script>
